{% extends "base.html" %}

{% block title %}×œ×•×— ×‘×§×¨×” - ××¢×¨×›×ª × ×™×”×•×œ ×™×©×™×‘×”{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Header -->
    <div class="page-header">
        <div>
            <h1>×œ×•×— ×‘×§×¨×” ×¨××©×™</h1>
            <p class="date-info">{{ stats.hebrew_date }} | {{ stats.today }}</p>
        </div>
    </div>

    <!-- Stats Cards Row -->
    <div class="stats-row">
        <!-- Card 1: Present -->
        <div class="stat-card card-success">
            <div class="card-border"></div>
            <div class="card-content">
                <div class="card-value">{{ stats.present }}</div>
                <div class="card-label">× ×•×›×—×™× ×”×™×•×</div>
            </div>
        </div>

        <!-- Card 2: Absent -->
        <div class="stat-card card-danger">
            <div class="card-border"></div>
            <div class="card-content">
                <div class="card-value">{{ stats.absent }}</div>
                <div class="card-label">×—×¡×¨×™× ×”×™×•×</div>
            </div>
        </div>

        <!-- Card 3: Percentage -->
        <div class="stat-card card-info">
            <div class="card-border"></div>
            <div class="card-content">
                <div class="card-value">{{ stats.percent }}%</div>
                <div class="card-label">××—×•×– × ×•×›×—×•×ª</div>
            </div>
        </div>

        <!-- Card 4: Total Students -->
        <div class="stat-card card-warning">
            <div class="card-border"></div>
            <div class="card-content">
                <div class="card-value">{{ stats.total }}</div>
                <div class="card-label">×ª×œ××™×“×™× ×¤×¢×™×œ×™×</div>
            </div>
        </div>
    </div>

    <!-- Chart Section -->
    <div class="content-card">
        <h2 class="card-title">× ×•×›×—×•×ª ×©×‘×•×¢×™×ª</h2>
        <div class="chart-container">
            <div class="chart-bars">
                <div class="bar-item">
                    <div class="bar-percent">95%</div>
                    <div class="bar-background">
                        <div class="bar-fill" style="height: 95%"></div>
                    </div>
                    <div class="bar-label">×'</div>
                </div>
                <div class="bar-item">
                    <div class="bar-percent">92%</div>
                    <div class="bar-background">
                        <div class="bar-fill" style="height: 92%"></div>
                    </div>
                    <div class="bar-label">×‘'</div>
                </div>
                <div class="bar-item">
                    <div class="bar-percent">88%</div>
                    <div class="bar-background">
                        <div class="bar-fill" style="height: 88%"></div>
                    </div>
                    <div class="bar-label">×’'</div>
                </div>
                <div class="bar-item">
                    <div class="bar-percent">90%</div>
                    <div class="bar-background">
                        <div class="bar-fill" style="height: 90%"></div>
                    </div>
                    <div class="bar-label">×“'</div>
                </div>
                <div class="bar-item">
                    <div class="bar-percent">87%</div>
                    <div class="bar-background">
                        <div class="bar-fill" style="height: 87%"></div>
                    </div>
                    <div class="bar-label">×”'</div>
                </div>
                <div class="bar-item">
                    <div class="bar-percent">85%</div>
                    <div class="bar-background">
                        <div class="bar-fill" style="height: 85%"></div>
                    </div>
                    <div class="bar-label">×•'</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Access to Study Sessions -->
    <div class="content-card">
        <h2 class="card-title">×’×™×©×” ××”×™×¨×” - ×¡×“×¨×™ ×œ×™××•×“ ×•×ª×¤×™×œ×•×ª</h2>
        <div class="quick-access-grid">
            <!-- ×ª×¤×™×œ×•×ª -->
            <a href="#" class="quick-access-btn" data-session-id="1" data-category="×ª×¤×™×œ×”">
                <span class="qa-icon">ğŸŒ…</span>
                <span class="qa-label">×©×—×¨×™×ª</span>
            </a>
            <a href="#" class="quick-access-btn" data-session-id="2" data-category="×ª×¤×™×œ×”">
                <span class="qa-icon">â˜€ï¸</span>
                <span class="qa-label">×× ×—×”</span>
            </a>
            <a href="#" class="quick-access-btn" data-session-id="3" data-category="×ª×¤×™×œ×”">
                <span class="qa-icon">ğŸŒ™</span>
                <span class="qa-label">××¢×¨×™×‘</span>
            </a>

            <!-- ×¡×“×¨×™ ×œ×™××•×“ -->
            <a href="#" class="quick-access-btn" data-session-id="4" data-category="×œ×™××•×“">
                <span class="qa-icon">ğŸ“–</span>
                <span class="qa-label">×©×™×¢×•×¨ ×‘×§×™××•×ª</span>
            </a>
            <a href="#" class="quick-access-btn" data-session-id="5" data-category="×œ×™××•×“">
                <span class="qa-icon">ğŸ“</span>
                <span class="qa-label">×¡×“×¨ × - ×—×–×¨×” ×¢×™×•×Ÿ</span>
            </a>
            <a href="#" class="quick-access-btn" data-session-id="6" data-category="×œ×™××•×“">
                <span class="qa-icon">ğŸ“š</span>
                <span class="qa-label">×©×™×¢×•×¨ ×¢×™×•×Ÿ</span>
            </a>
            <a href="#" class="quick-access-btn" data-session-id="7" data-category="×œ×™××•×“">
                <span class="qa-icon">ğŸ“˜</span>
                <span class="qa-label">×©×™×¢×•×¨ ×¢×™×•×Ÿ 2</span>
            </a>
            <a href="#" class="quick-access-btn" data-session-id="8" data-category="×œ×™××•×“">
                <span class="qa-icon">ğŸ“œ</span>
                <span class="qa-label">×©×™×¢×•×¨ ×’××¨× ×¨×©×™</span>
            </a>
            <a href="#" class="quick-access-btn" data-session-id="9" data-category="×œ×™××•×“">
                <span class="qa-icon">ğŸ“•</span>
                <span class="qa-label">×©×™×¢×•×¨ ×—×•××© ×¨×©×™</span>
            </a>
            <a href="#" class="quick-access-btn" data-session-id="10" data-category="×œ×™××•×“">
                <span class="qa-icon">âš–ï¸</span>
                <span class="qa-label">×”×œ×›×”</span>
            </a>
            <a href="#" class="quick-access-btn" data-session-id="11" data-category="×œ×™××•×“">
                <span class="qa-icon">ğŸ”„</span>
                <span class="qa-label">×¡×“×¨ ×‘ - ×—×–×¨×” ×‘×§×™××•×ª</span>
            </a>
            <a href="#" class="quick-access-btn" data-session-id="12" data-category="×œ×™××•×“">
                <span class="qa-icon">ğŸ“‹</span>
                <span class="qa-label">×¡×“×¨ ×’ - ×”×›× ×” ×¢×™×•×Ÿ</span>
            </a>
        </div>
    </div>

    <!-- Activities Section -->
    <div class="content-card">
        <h2 class="card-title">×¤×¢×™×œ×•×™×•×ª ××—×¨×•× ×•×ª</h2>
        <div class="activities-list">
            <p class="empty-message">××™×Ÿ ×¤×¢×™×œ×•×™×•×ª ××—×¨×•× ×•×ª</p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Session ID to name mapping - matches database IDs
    const sessionMap = {
        1: '×©×—×¨×™×ª',
        2: '×× ×—×”',
        3: '××¢×¨×™×‘',
        4: '×©×™×¢×•×¨ ×‘×§×™××•×ª',
        5: '×¡×“×¨ × - ×—×–×¨×” ×¢×™×•×Ÿ',
        6: '×©×™×¢×•×¨ ×¢×™×•×Ÿ',
        7: '×©×™×¢×•×¨ ×¢×™×•×Ÿ 2',
        8: '×©×™×¢×•×¨ ×’××¨× ×¨×©×™',
        9: '×©×™×¢×•×¨ ×—×•××© ×¨×©×™',
        10: '×”×œ×›×”',
        11: '×¡×“×¨ ×‘ - ×—×–×¨×” ×‘×§×™××•×ª',
        12: '×¡×“×¨ ×’ - ×”×›× ×” ×¢×™×•×Ÿ'
    };

    // Add click handlers to all quick access buttons
    document.addEventListener('DOMContentLoaded', function() {
        const buttons = document.querySelectorAll('.quick-access-btn');
        buttons.forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                const sessionId = parseInt(this.getAttribute('data-session-id'));
                const category = this.getAttribute('data-category');
                const sessionName = sessionMap[sessionId];

                if (sessionName) {
                    const url = '/attendance?session=' + encodeURIComponent(sessionName) + '&category=' + encodeURIComponent(category);
                    window.location.href = url;
                } else {
                    console.error('Session not found for ID:', sessionId);
                }
            });
        });
    });
</script>
{% endblock %}
